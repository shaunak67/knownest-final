{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Text","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"JKIzsQ5YQ0gDj0MIyY0Q7F1zJtU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/StyleSheet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"MK7+k1V+KnvCVW7Kj2k/ydtjmVU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/ActivityIndicator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"bSAkUkqZq0shBb5bU6kCYXi4ciA=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":124},"end":{"line":3,"column":40,"index":164}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":165},"end":{"line":4,"column":50,"index":215}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}},{"name":"../contexts/ThemeContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":216},"end":{"line":5,"column":52,"index":268}}],"key":"Qyr6TFgycwhumdxDRkHRN41VAvI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/auth-callback.tsx\",\n    _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return AuthCallback;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[1], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsText = require(_dependencyMap[2], \"react-native-web/dist/exports/Text\");\n  var Text = _interopDefault(_reactNativeWebDistExportsText);\n  var _reactNativeWebDistExportsStyleSheet = require(_dependencyMap[3], \"react-native-web/dist/exports/StyleSheet\");\n  var StyleSheet = _interopDefault(_reactNativeWebDistExportsStyleSheet);\n  var _reactNativeWebDistExportsActivityIndicator = require(_dependencyMap[4], \"react-native-web/dist/exports/ActivityIndicator\");\n  var ActivityIndicator = _interopDefault(_reactNativeWebDistExportsActivityIndicator);\n  var _expoRouter = require(_dependencyMap[5], \"expo-router\");\n  var _contextsAuthContext = require(_dependencyMap[6], \"../contexts/AuthContext\");\n  var _contextsThemeContext = require(_dependencyMap[7], \"../contexts/ThemeContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[8], \"react/jsx-dev-runtime\");\n  function AuthCallback() {\n    _s();\n    const router = (0, _expoRouter.useRouter)();\n    const {\n      login\n    } = (0, _contextsAuthContext.useAuth)();\n    const {\n      colors\n    } = (0, _contextsThemeContext.useTheme)();\n    const hasProcessed = (0, _react.useRef)(false);\n    (0, _react.useEffect)(() => {\n      if (hasProcessed.current) return;\n      hasProcessed.current = true;\n      const processAuth = async () => {\n        try {\n          let sessionId = null;\n          if (typeof window !== 'undefined') {\n            // Try hash fragment first: #session_id=xxx or #/session_id=xxx\n            const hash = window.location.hash || '';\n            const hashMatch = hash.match(/session_id=([^&]+)/);\n            if (hashMatch) {\n              sessionId = decodeURIComponent(hashMatch[1]);\n            }\n\n            // Try query params: ?session_id=xxx\n            if (!sessionId) {\n              const searchParams = new URLSearchParams(window.location.search);\n              sessionId = searchParams.get('session_id');\n            }\n\n            // Try full URL parsing as fallback\n            if (!sessionId) {\n              const fullUrl = window.location.href;\n              const urlMatch = fullUrl.match(/session_id=([^&#]+)/);\n              if (urlMatch) {\n                sessionId = decodeURIComponent(urlMatch[1]);\n              }\n            }\n          }\n          if (sessionId) {\n            const user = await login(sessionId);\n            if (user) {\n              router.replace('/(tabs)/home');\n              return;\n            }\n          }\n\n          // No session_id found or login failed\n          router.replace('/');\n        } catch (err) {\n          console.error('Auth callback error:', err);\n          router.replace('/');\n        }\n      };\n\n      // Small delay to ensure URL is fully loaded\n      setTimeout(processAuth, 300);\n    }, []);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n      style: [styles.container, {\n        backgroundColor: colors.background\n      }],\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(ActivityIndicator.default, {\n        size: \"large\",\n        color: colors.primary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(Text.default, {\n        style: [styles.text, {\n          color: colors.textSecondary\n        }],\n        children: \"Signing you in...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthCallback, \"gu6j8wcFgpYfQQbGXThTAXk7r8s=\", false, function () {\n    return [_expoRouter.useRouter, _contextsAuthContext.useAuth, _contextsThemeContext.useTheme];\n  });\n  _c = AuthCallback;\n  const styles = StyleSheet.default.create({\n    container: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    text: {\n      marginTop: 16,\n      fontSize: 16\n    }\n  });\n  var _c;\n  $RefreshReg$(_c, \"AuthCallback\");\n});","lineCount":135,"map":[[14,2,7,15,"Object"],[14,8,7,15],[14,9,7,15,"defineProperty"],[14,23,7,15],[14,24,7,15,"exports"],[14,31,7,15],[15,4,7,15,"enumerable"],[15,14,7,15],[16,4,7,15,"get"],[16,7,7,15],[16,18,7,15,"get"],[16,19,7,15],[17,6,7,15],[17,13,7,15,"AuthCallback"],[17,25,7,15],[18,4,7,15],[19,2,7,15],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,1,49],[21,6,1,49,"_reactNativeWebDistExportsView"],[21,36,1,49],[21,39,1,49,"require"],[21,46,1,49],[21,47,1,49,"_dependencyMap"],[21,61,1,49],[22,2,1,49],[22,6,1,49,"View"],[22,10,1,49],[22,13,1,49,"_interopDefault"],[22,28,1,49],[22,29,1,49,"_reactNativeWebDistExportsView"],[22,59,1,49],[23,2,1,49],[23,6,1,49,"_reactNativeWebDistExportsText"],[23,36,1,49],[23,39,1,49,"require"],[23,46,1,49],[23,47,1,49,"_dependencyMap"],[23,61,1,49],[24,2,1,49],[24,6,1,49,"Text"],[24,10,1,49],[24,13,1,49,"_interopDefault"],[24,28,1,49],[24,29,1,49,"_reactNativeWebDistExportsText"],[24,59,1,49],[25,2,1,49],[25,6,1,49,"_reactNativeWebDistExportsStyleSheet"],[25,42,1,49],[25,45,1,49,"require"],[25,52,1,49],[25,53,1,49,"_dependencyMap"],[25,67,1,49],[26,2,1,49],[26,6,1,49,"StyleSheet"],[26,16,1,49],[26,19,1,49,"_interopDefault"],[26,34,1,49],[26,35,1,49,"_reactNativeWebDistExportsStyleSheet"],[26,71,1,49],[27,2,1,49],[27,6,1,49,"_reactNativeWebDistExportsActivityIndicator"],[27,49,1,49],[27,52,1,49,"require"],[27,59,1,49],[27,60,1,49,"_dependencyMap"],[27,74,1,49],[28,2,1,49],[28,6,1,49,"ActivityIndicator"],[28,23,1,49],[28,26,1,49,"_interopDefault"],[28,41,1,49],[28,42,1,49,"_reactNativeWebDistExportsActivityIndicator"],[28,85,1,49],[29,2,3,0],[29,6,3,0,"_expoRouter"],[29,17,3,0],[29,20,3,0,"require"],[29,27,3,0],[29,28,3,0,"_dependencyMap"],[29,42,3,0],[30,2,4,0],[30,6,4,0,"_contextsAuthContext"],[30,26,4,0],[30,29,4,0,"require"],[30,36,4,0],[30,37,4,0,"_dependencyMap"],[30,51,4,0],[31,2,5,0],[31,6,5,0,"_contextsThemeContext"],[31,27,5,0],[31,30,5,0,"require"],[31,37,5,0],[31,38,5,0,"_dependencyMap"],[31,52,5,0],[32,2,5,52],[32,6,5,52,"_reactJsxDevRuntime"],[32,25,5,52],[32,28,5,52,"require"],[32,35,5,52],[32,36,5,52,"_dependencyMap"],[32,50,5,52],[33,2,7,15],[33,11,7,24,"AuthCallback"],[33,23,7,36,"AuthCallback"],[33,24,7,36],[33,26,7,39],[34,4,7,39,"_s"],[34,6,7,39],[35,4,8,2],[35,10,8,8,"router"],[35,16,8,14],[35,19,8,17],[35,23,8,17,"useRouter"],[35,34,8,26],[35,35,8,26,"useRouter"],[35,44,8,26],[35,46,8,27],[35,47,8,28],[36,4,9,2],[36,10,9,8],[37,6,9,10,"login"],[38,4,9,16],[38,5,9,17],[38,8,9,20],[38,12,9,20,"useAuth"],[38,32,9,27],[38,33,9,27,"useAuth"],[38,40,9,27],[38,42,9,28],[38,43,9,29],[39,4,10,2],[39,10,10,8],[40,6,10,10,"colors"],[41,4,10,17],[41,5,10,18],[41,8,10,21],[41,12,10,21,"useTheme"],[41,33,10,29],[41,34,10,29,"useTheme"],[41,42,10,29],[41,44,10,30],[41,45,10,31],[42,4,11,2],[42,10,11,8,"hasProcessed"],[42,22,11,20],[42,25,11,23],[42,29,11,23,"useRef"],[42,35,11,29],[42,36,11,29,"useRef"],[42,42,11,29],[42,44,11,30],[42,49,11,35],[42,50,11,36],[43,4,13,2],[43,8,13,2,"useEffect"],[43,14,13,11],[43,15,13,11,"useEffect"],[43,24,13,11],[43,26,13,12],[43,32,13,18],[44,6,14,4],[44,10,14,8,"hasProcessed"],[44,22,14,20],[44,23,14,21,"current"],[44,30,14,28],[44,32,14,30],[45,6,15,4,"hasProcessed"],[45,18,15,16],[45,19,15,17,"current"],[45,26,15,24],[45,29,15,27],[45,33,15,31],[46,6,17,4],[46,12,17,10,"processAuth"],[46,23,17,21],[46,26,17,24],[46,32,17,24,"processAuth"],[46,33,17,24],[46,38,17,36],[47,8,18,6],[47,12,18,10],[48,10,19,8],[48,14,19,12,"sessionId"],[48,23,19,36],[48,26,19,39],[48,30,19,43],[49,10,21,8],[49,14,21,12],[49,21,21,19,"window"],[49,27,21,25],[49,32,21,30],[49,43,21,41],[49,45,21,43],[50,12,22,10],[51,12,23,10],[51,18,23,16,"hash"],[51,22,23,20],[51,25,23,23,"window"],[51,31,23,29],[51,32,23,30,"location"],[51,40,23,38],[51,41,23,39,"hash"],[51,45,23,43],[51,49,23,47],[51,51,23,49],[52,12,24,10],[52,18,24,16,"hashMatch"],[52,27,24,25],[52,30,24,28,"hash"],[52,34,24,32],[52,35,24,33,"match"],[52,40,24,38],[52,41,24,39],[52,61,24,59],[52,62,24,60],[53,12,25,10],[53,16,25,14,"hashMatch"],[53,25,25,23],[53,27,25,25],[54,14,26,12,"sessionId"],[54,23,26,21],[54,26,26,24,"decodeURIComponent"],[54,44,26,42],[54,45,26,43,"hashMatch"],[54,54,26,52],[54,55,26,53],[54,56,26,54],[54,57,26,55],[54,58,26,56],[55,12,27,10],[57,12,29,10],[58,12,30,10],[58,16,30,14],[58,17,30,15,"sessionId"],[58,26,30,24],[58,28,30,26],[59,14,31,12],[59,20,31,18,"searchParams"],[59,32,31,30],[59,35,31,33],[59,39,31,37,"URLSearchParams"],[59,54,31,52],[59,55,31,53,"window"],[59,61,31,59],[59,62,31,60,"location"],[59,70,31,68],[59,71,31,69,"search"],[59,77,31,75],[59,78,31,76],[60,14,32,12,"sessionId"],[60,23,32,21],[60,26,32,24,"searchParams"],[60,38,32,36],[60,39,32,37,"get"],[60,42,32,40],[60,43,32,41],[60,55,32,53],[60,56,32,54],[61,12,33,10],[63,12,35,10],[64,12,36,10],[64,16,36,14],[64,17,36,15,"sessionId"],[64,26,36,24],[64,28,36,26],[65,14,37,12],[65,20,37,18,"fullUrl"],[65,27,37,25],[65,30,37,28,"window"],[65,36,37,34],[65,37,37,35,"location"],[65,45,37,43],[65,46,37,44,"href"],[65,50,37,48],[66,14,38,12],[66,20,38,18,"urlMatch"],[66,28,38,26],[66,31,38,29,"fullUrl"],[66,38,38,36],[66,39,38,37,"match"],[66,44,38,42],[66,45,38,43],[66,66,38,64],[66,67,38,65],[67,14,39,12],[67,18,39,16,"urlMatch"],[67,26,39,24],[67,28,39,26],[68,16,40,14,"sessionId"],[68,25,40,23],[68,28,40,26,"decodeURIComponent"],[68,46,40,44],[68,47,40,45,"urlMatch"],[68,55,40,53],[68,56,40,54],[68,57,40,55],[68,58,40,56],[68,59,40,57],[69,14,41,12],[70,12,42,10],[71,10,43,8],[72,10,45,8],[72,14,45,12,"sessionId"],[72,23,45,21],[72,25,45,23],[73,12,46,10],[73,18,46,16,"user"],[73,22,46,20],[73,25,46,23],[73,31,46,29,"login"],[73,36,46,34],[73,37,46,35,"sessionId"],[73,46,46,44],[73,47,46,45],[74,12,47,10],[74,16,47,14,"user"],[74,20,47,18],[74,22,47,20],[75,14,48,12,"router"],[75,20,48,18],[75,21,48,19,"replace"],[75,28,48,26],[75,29,48,27],[75,43,48,41],[75,44,48,42],[76,14,49,12],[77,12,50,10],[78,10,51,8],[80,10,53,8],[81,10,54,8,"router"],[81,16,54,14],[81,17,54,15,"replace"],[81,24,54,22],[81,25,54,23],[81,28,54,26],[81,29,54,27],[82,8,55,6],[82,9,55,7],[82,10,55,8],[82,17,55,15,"err"],[82,20,55,18],[82,22,55,20],[83,10,56,8,"console"],[83,17,56,15],[83,18,56,16,"error"],[83,23,56,21],[83,24,56,22],[83,46,56,44],[83,48,56,46,"err"],[83,51,56,49],[83,52,56,50],[84,10,57,8,"router"],[84,16,57,14],[84,17,57,15,"replace"],[84,24,57,22],[84,25,57,23],[84,28,57,26],[84,29,57,27],[85,8,58,6],[86,6,59,4],[86,7,59,5],[88,6,61,4],[89,6,62,4,"setTimeout"],[89,16,62,14],[89,17,62,15,"processAuth"],[89,28,62,26],[89,30,62,28],[89,33,62,31],[89,34,62,32],[90,4,63,2],[90,5,63,3],[90,7,63,5],[90,9,63,7],[90,10,63,8],[91,4,65,2],[91,24,66,4],[91,28,66,4,"_reactJsxDevRuntime"],[91,47,66,4],[91,48,66,4,"jsxDEV"],[91,54,66,4],[91,56,66,5,"View"],[91,60,66,9],[91,61,66,9,"default"],[91,68,66,9],[92,6,66,10,"style"],[92,11,66,15],[92,13,66,17],[92,14,66,18,"styles"],[92,20,66,24],[92,21,66,25,"container"],[92,30,66,34],[92,32,66,36],[93,8,66,38,"backgroundColor"],[93,23,66,53],[93,25,66,55,"colors"],[93,31,66,61],[93,32,66,62,"background"],[94,6,66,73],[94,7,66,74],[94,8,66,76],[95,6,66,76,"children"],[95,14,66,76],[95,30,67,6],[95,34,67,6,"_reactJsxDevRuntime"],[95,53,67,6],[95,54,67,6,"jsxDEV"],[95,60,67,6],[95,62,67,7,"ActivityIndicator"],[95,79,67,24],[95,80,67,24,"default"],[95,87,67,24],[96,8,67,25,"size"],[96,12,67,29],[96,14,67,30],[96,21,67,37],[97,8,67,38,"color"],[97,13,67,43],[97,15,67,45,"colors"],[97,21,67,51],[97,22,67,52,"primary"],[98,6,67,60],[99,8,67,60,"fileName"],[99,16,67,60],[99,18,67,60,"_jsxFileName"],[99,30,67,60],[100,8,67,60,"lineNumber"],[100,18,67,60],[101,8,67,60,"columnNumber"],[101,20,67,60],[102,6,67,60],[102,13,67,62],[102,14,67,63],[102,29,68,6],[102,33,68,6,"_reactJsxDevRuntime"],[102,52,68,6],[102,53,68,6,"jsxDEV"],[102,59,68,6],[102,61,68,7,"Text"],[102,65,68,11],[102,66,68,11,"default"],[102,73,68,11],[103,8,68,12,"style"],[103,13,68,17],[103,15,68,19],[103,16,68,20,"styles"],[103,22,68,26],[103,23,68,27,"text"],[103,27,68,31],[103,29,68,33],[104,10,68,35,"color"],[104,15,68,40],[104,17,68,42,"colors"],[104,23,68,48],[104,24,68,49,"textSecondary"],[105,8,68,63],[105,9,68,64],[105,10,68,66],[106,8,68,66,"children"],[106,16,68,66],[106,18,68,67],[107,6,68,84],[108,8,68,84,"fileName"],[108,16,68,84],[108,18,68,84,"_jsxFileName"],[108,30,68,84],[109,8,68,84,"lineNumber"],[109,18,68,84],[110,8,68,84,"columnNumber"],[110,20,68,84],[111,6,68,84],[111,13,68,90],[111,14,68,91],[112,4,68,91],[113,6,68,91,"fileName"],[113,14,68,91],[113,16,68,91,"_jsxFileName"],[113,28,68,91],[114,6,68,91,"lineNumber"],[114,16,68,91],[115,6,68,91,"columnNumber"],[115,18,68,91],[116,4,68,91],[116,11,69,10],[116,12,69,11],[117,2,71,0],[118,2,71,1,"_s"],[118,4,71,1],[118,5,7,24,"AuthCallback"],[118,17,7,36],[119,4,7,36],[119,12,8,17,"useRouter"],[119,23,8,26],[119,24,8,26,"useRouter"],[119,33,8,26],[119,35,9,20,"useAuth"],[119,55,9,27],[119,56,9,27,"useAuth"],[119,63,9,27],[119,65,10,21,"useTheme"],[119,86,10,29],[119,87,10,29,"useTheme"],[119,95,10,29],[120,2,10,29],[121,2,10,29,"_c"],[121,4,10,29],[121,7,7,24,"AuthCallback"],[121,19,7,36],[122,2,73,0],[122,8,73,6,"styles"],[122,14,73,12],[122,17,73,15,"StyleSheet"],[122,27,73,25],[122,28,73,25,"default"],[122,35,73,25],[122,36,73,26,"create"],[122,42,73,32],[122,43,73,33],[123,4,74,2,"container"],[123,13,74,11],[123,15,74,13],[124,6,75,4,"flex"],[124,10,75,8],[124,12,75,10],[124,13,75,11],[125,6,76,4,"justifyContent"],[125,20,76,18],[125,22,76,20],[125,30,76,28],[126,6,77,4,"alignItems"],[126,16,77,14],[126,18,77,16],[127,4,78,2],[127,5,78,3],[128,4,79,2,"text"],[128,8,79,6],[128,10,79,8],[129,6,80,4,"marginTop"],[129,15,80,13],[129,17,80,15],[129,19,80,17],[130,6,81,4,"fontSize"],[130,14,81,12],[130,16,81,14],[131,4,82,2],[132,2,83,0],[132,3,83,1],[132,4,83,2],[133,2,83,3],[133,6,83,3,"_c"],[133,8,83,3],[134,2,83,3,"$RefreshReg$"],[134,14,83,3],[134,15,83,3,"_c"],[134,17,83,3],[135,0,83,3],[135,3]],"functionMap":{"names":["<global>","AuthCallback","useEffect$argument_0","processAuth"],"mappings":"AAA;eCM;YCM;wBCI;KD0C;GDI;CDQ"},"hasCjsExports":false},"type":"js/module"}]}