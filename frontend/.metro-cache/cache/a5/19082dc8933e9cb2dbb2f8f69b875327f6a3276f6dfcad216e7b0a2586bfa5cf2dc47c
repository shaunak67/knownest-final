{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/View","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"4kYBDC6LJJXoH7P9rWDi3vkLVB0=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Text","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"JKIzsQ5YQ0gDj0MIyY0Q7F1zJtU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/StyleSheet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"MK7+k1V+KnvCVW7Kj2k/ydtjmVU=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/ActivityIndicator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"bSAkUkqZq0shBb5bU6kCYXi4ciA=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":124},"end":{"line":3,"column":40,"index":164}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":165},"end":{"line":4,"column":50,"index":215}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}},{"name":"../contexts/ThemeContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":216},"end":{"line":5,"column":52,"index":268}}],"key":"Qyr6TFgycwhumdxDRkHRN41VAvI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/auth-callback.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return AuthCallback;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsView = require(_dependencyMap[1], \"react-native-web/dist/exports/View\");\n  var View = _interopDefault(_reactNativeWebDistExportsView);\n  var _reactNativeWebDistExportsText = require(_dependencyMap[2], \"react-native-web/dist/exports/Text\");\n  var Text = _interopDefault(_reactNativeWebDistExportsText);\n  var _reactNativeWebDistExportsStyleSheet = require(_dependencyMap[3], \"react-native-web/dist/exports/StyleSheet\");\n  var StyleSheet = _interopDefault(_reactNativeWebDistExportsStyleSheet);\n  var _reactNativeWebDistExportsActivityIndicator = require(_dependencyMap[4], \"react-native-web/dist/exports/ActivityIndicator\");\n  var ActivityIndicator = _interopDefault(_reactNativeWebDistExportsActivityIndicator);\n  var _expoRouter = require(_dependencyMap[5], \"expo-router\");\n  var _contextsAuthContext = require(_dependencyMap[6], \"../contexts/AuthContext\");\n  var _contextsThemeContext = require(_dependencyMap[7], \"../contexts/ThemeContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[8], \"react/jsx-dev-runtime\");\n  function AuthCallback() {\n    const router = (0, _expoRouter.useRouter)();\n    const {\n      login\n    } = (0, _contextsAuthContext.useAuth)();\n    const {\n      colors\n    } = (0, _contextsThemeContext.useTheme)();\n    const hasProcessed = (0, _react.useRef)(false);\n    (0, _react.useEffect)(() => {\n      if (hasProcessed.current) return;\n      hasProcessed.current = true;\n      const processAuth = async () => {\n        try {\n          let sessionId = null;\n          if (false) {\n            // Try hash fragment first: #session_id=xxx or #/session_id=xxx\n            const hash = window.location.hash || '';\n            const hashMatch = hash.match(/session_id=([^&]+)/);\n            if (hashMatch) {\n              sessionId = decodeURIComponent(hashMatch[1]);\n            }\n\n            // Try query params: ?session_id=xxx\n            if (!sessionId) {\n              const searchParams = new URLSearchParams(window.location.search);\n              sessionId = searchParams.get('session_id');\n            }\n\n            // Try full URL parsing as fallback\n            if (!sessionId) {\n              const fullUrl = window.location.href;\n              const urlMatch = fullUrl.match(/session_id=([^&#]+)/);\n              if (urlMatch) {\n                sessionId = decodeURIComponent(urlMatch[1]);\n              }\n            }\n          }\n          if (sessionId) {\n            const user = await login(sessionId);\n            if (user) {\n              router.replace('/(tabs)/home');\n              return;\n            }\n          }\n\n          // No session_id found or login failed\n          router.replace('/');\n        } catch (err) {\n          console.error('Auth callback error:', err);\n          router.replace('/');\n        }\n      };\n\n      // Small delay to ensure URL is fully loaded\n      setTimeout(processAuth, 300);\n    }, []);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(View.default, {\n      style: [styles.container, {\n        backgroundColor: colors.background\n      }],\n      children: [/*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(ActivityIndicator.default, {\n        size: \"large\",\n        color: colors.primary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }, this), /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(Text.default, {\n        style: [styles.text, {\n          color: colors.textSecondary\n        }],\n        children: \"Signing you in...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }, this);\n  }\n  const styles = StyleSheet.default.create({\n    container: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    text: {\n      marginTop: 16,\n      fontSize: 16\n    }\n  });\n});","lineCount":127,"map":[[13,2,7,15,"Object"],[13,8,7,15],[13,9,7,15,"defineProperty"],[13,23,7,15],[13,24,7,15,"exports"],[13,31,7,15],[14,4,7,15,"enumerable"],[14,14,7,15],[15,4,7,15,"get"],[15,7,7,15],[15,18,7,15,"get"],[15,19,7,15],[16,6,7,15],[16,13,7,15,"AuthCallback"],[16,25,7,15],[17,4,7,15],[18,2,7,15],[19,2,1,0],[19,6,1,0,"_react"],[19,12,1,0],[19,15,1,0,"require"],[19,22,1,0],[19,23,1,0,"_dependencyMap"],[19,37,1,0],[20,2,1,49],[20,6,1,49,"_reactNativeWebDistExportsView"],[20,36,1,49],[20,39,1,49,"require"],[20,46,1,49],[20,47,1,49,"_dependencyMap"],[20,61,1,49],[21,2,1,49],[21,6,1,49,"View"],[21,10,1,49],[21,13,1,49,"_interopDefault"],[21,28,1,49],[21,29,1,49,"_reactNativeWebDistExportsView"],[21,59,1,49],[22,2,1,49],[22,6,1,49,"_reactNativeWebDistExportsText"],[22,36,1,49],[22,39,1,49,"require"],[22,46,1,49],[22,47,1,49,"_dependencyMap"],[22,61,1,49],[23,2,1,49],[23,6,1,49,"Text"],[23,10,1,49],[23,13,1,49,"_interopDefault"],[23,28,1,49],[23,29,1,49,"_reactNativeWebDistExportsText"],[23,59,1,49],[24,2,1,49],[24,6,1,49,"_reactNativeWebDistExportsStyleSheet"],[24,42,1,49],[24,45,1,49,"require"],[24,52,1,49],[24,53,1,49,"_dependencyMap"],[24,67,1,49],[25,2,1,49],[25,6,1,49,"StyleSheet"],[25,16,1,49],[25,19,1,49,"_interopDefault"],[25,34,1,49],[25,35,1,49,"_reactNativeWebDistExportsStyleSheet"],[25,71,1,49],[26,2,1,49],[26,6,1,49,"_reactNativeWebDistExportsActivityIndicator"],[26,49,1,49],[26,52,1,49,"require"],[26,59,1,49],[26,60,1,49,"_dependencyMap"],[26,74,1,49],[27,2,1,49],[27,6,1,49,"ActivityIndicator"],[27,23,1,49],[27,26,1,49,"_interopDefault"],[27,41,1,49],[27,42,1,49,"_reactNativeWebDistExportsActivityIndicator"],[27,85,1,49],[28,2,3,0],[28,6,3,0,"_expoRouter"],[28,17,3,0],[28,20,3,0,"require"],[28,27,3,0],[28,28,3,0,"_dependencyMap"],[28,42,3,0],[29,2,4,0],[29,6,4,0,"_contextsAuthContext"],[29,26,4,0],[29,29,4,0,"require"],[29,36,4,0],[29,37,4,0,"_dependencyMap"],[29,51,4,0],[30,2,5,0],[30,6,5,0,"_contextsThemeContext"],[30,27,5,0],[30,30,5,0,"require"],[30,37,5,0],[30,38,5,0,"_dependencyMap"],[30,52,5,0],[31,2,5,52],[31,6,5,52,"_reactJsxDevRuntime"],[31,25,5,52],[31,28,5,52,"require"],[31,35,5,52],[31,36,5,52,"_dependencyMap"],[31,50,5,52],[32,2,7,15],[32,11,7,24,"AuthCallback"],[32,23,7,36,"AuthCallback"],[32,24,7,36],[32,26,7,39],[33,4,8,2],[33,10,8,8,"router"],[33,16,8,14],[33,19,8,17],[33,23,8,17,"useRouter"],[33,34,8,26],[33,35,8,26,"useRouter"],[33,44,8,26],[33,46,8,27],[33,47,8,28],[34,4,9,2],[34,10,9,8],[35,6,9,10,"login"],[36,4,9,16],[36,5,9,17],[36,8,9,20],[36,12,9,20,"useAuth"],[36,32,9,27],[36,33,9,27,"useAuth"],[36,40,9,27],[36,42,9,28],[36,43,9,29],[37,4,10,2],[37,10,10,8],[38,6,10,10,"colors"],[39,4,10,17],[39,5,10,18],[39,8,10,21],[39,12,10,21,"useTheme"],[39,33,10,29],[39,34,10,29,"useTheme"],[39,42,10,29],[39,44,10,30],[39,45,10,31],[40,4,11,2],[40,10,11,8,"hasProcessed"],[40,22,11,20],[40,25,11,23],[40,29,11,23,"useRef"],[40,35,11,29],[40,36,11,29,"useRef"],[40,42,11,29],[40,44,11,30],[40,49,11,35],[40,50,11,36],[41,4,13,2],[41,8,13,2,"useEffect"],[41,14,13,11],[41,15,13,11,"useEffect"],[41,24,13,11],[41,26,13,12],[41,32,13,18],[42,6,14,4],[42,10,14,8,"hasProcessed"],[42,22,14,20],[42,23,14,21,"current"],[42,30,14,28],[42,32,14,30],[43,6,15,4,"hasProcessed"],[43,18,15,16],[43,19,15,17,"current"],[43,26,15,24],[43,29,15,27],[43,33,15,31],[44,6,17,4],[44,12,17,10,"processAuth"],[44,23,17,21],[44,26,17,24],[44,32,17,24,"processAuth"],[44,33,17,24],[44,38,17,36],[45,8,18,6],[45,12,18,10],[46,10,19,8],[46,14,19,12,"sessionId"],[46,23,19,36],[46,26,19,39],[46,30,19,43],[47,10,21,8],[47,21,21,43],[48,12,22,10],[49,12,23,10],[49,18,23,16,"hash"],[49,22,23,20],[49,25,23,23,"window"],[49,31,23,29],[49,32,23,30,"location"],[49,40,23,38],[49,41,23,39,"hash"],[49,45,23,43],[49,49,23,47],[49,51,23,49],[50,12,24,10],[50,18,24,16,"hashMatch"],[50,27,24,25],[50,30,24,28,"hash"],[50,34,24,32],[50,35,24,33,"match"],[50,40,24,38],[50,41,24,39],[50,61,24,59],[50,62,24,60],[51,12,25,10],[51,16,25,14,"hashMatch"],[51,25,25,23],[51,27,25,25],[52,14,26,12,"sessionId"],[52,23,26,21],[52,26,26,24,"decodeURIComponent"],[52,44,26,42],[52,45,26,43,"hashMatch"],[52,54,26,52],[52,55,26,53],[52,56,26,54],[52,57,26,55],[52,58,26,56],[53,12,27,10],[55,12,29,10],[56,12,30,10],[56,16,30,14],[56,17,30,15,"sessionId"],[56,26,30,24],[56,28,30,26],[57,14,31,12],[57,20,31,18,"searchParams"],[57,32,31,30],[57,35,31,33],[57,39,31,37,"URLSearchParams"],[57,54,31,52],[57,55,31,53,"window"],[57,61,31,59],[57,62,31,60,"location"],[57,70,31,68],[57,71,31,69,"search"],[57,77,31,75],[57,78,31,76],[58,14,32,12,"sessionId"],[58,23,32,21],[58,26,32,24,"searchParams"],[58,38,32,36],[58,39,32,37,"get"],[58,42,32,40],[58,43,32,41],[58,55,32,53],[58,56,32,54],[59,12,33,10],[61,12,35,10],[62,12,36,10],[62,16,36,14],[62,17,36,15,"sessionId"],[62,26,36,24],[62,28,36,26],[63,14,37,12],[63,20,37,18,"fullUrl"],[63,27,37,25],[63,30,37,28,"window"],[63,36,37,34],[63,37,37,35,"location"],[63,45,37,43],[63,46,37,44,"href"],[63,50,37,48],[64,14,38,12],[64,20,38,18,"urlMatch"],[64,28,38,26],[64,31,38,29,"fullUrl"],[64,38,38,36],[64,39,38,37,"match"],[64,44,38,42],[64,45,38,43],[64,66,38,64],[64,67,38,65],[65,14,39,12],[65,18,39,16,"urlMatch"],[65,26,39,24],[65,28,39,26],[66,16,40,14,"sessionId"],[66,25,40,23],[66,28,40,26,"decodeURIComponent"],[66,46,40,44],[66,47,40,45,"urlMatch"],[66,55,40,53],[66,56,40,54],[66,57,40,55],[66,58,40,56],[66,59,40,57],[67,14,41,12],[68,12,42,10],[69,10,43,8],[70,10,45,8],[70,14,45,12,"sessionId"],[70,23,45,21],[70,25,45,23],[71,12,46,10],[71,18,46,16,"user"],[71,22,46,20],[71,25,46,23],[71,31,46,29,"login"],[71,36,46,34],[71,37,46,35,"sessionId"],[71,46,46,44],[71,47,46,45],[72,12,47,10],[72,16,47,14,"user"],[72,20,47,18],[72,22,47,20],[73,14,48,12,"router"],[73,20,48,18],[73,21,48,19,"replace"],[73,28,48,26],[73,29,48,27],[73,43,48,41],[73,44,48,42],[74,14,49,12],[75,12,50,10],[76,10,51,8],[78,10,53,8],[79,10,54,8,"router"],[79,16,54,14],[79,17,54,15,"replace"],[79,24,54,22],[79,25,54,23],[79,28,54,26],[79,29,54,27],[80,8,55,6],[80,9,55,7],[80,10,55,8],[80,17,55,15,"err"],[80,20,55,18],[80,22,55,20],[81,10,56,8,"console"],[81,17,56,15],[81,18,56,16,"error"],[81,23,56,21],[81,24,56,22],[81,46,56,44],[81,48,56,46,"err"],[81,51,56,49],[81,52,56,50],[82,10,57,8,"router"],[82,16,57,14],[82,17,57,15,"replace"],[82,24,57,22],[82,25,57,23],[82,28,57,26],[82,29,57,27],[83,8,58,6],[84,6,59,4],[84,7,59,5],[86,6,61,4],[87,6,62,4,"setTimeout"],[87,16,62,14],[87,17,62,15,"processAuth"],[87,28,62,26],[87,30,62,28],[87,33,62,31],[87,34,62,32],[88,4,63,2],[88,5,63,3],[88,7,63,5],[88,9,63,7],[88,10,63,8],[89,4,65,2],[89,24,66,4],[89,28,66,4,"_reactJsxDevRuntime"],[89,47,66,4],[89,48,66,4,"jsxDEV"],[89,54,66,4],[89,56,66,5,"View"],[89,60,66,9],[89,61,66,9,"default"],[89,68,66,9],[90,6,66,10,"style"],[90,11,66,15],[90,13,66,17],[90,14,66,18,"styles"],[90,20,66,24],[90,21,66,25,"container"],[90,30,66,34],[90,32,66,36],[91,8,66,38,"backgroundColor"],[91,23,66,53],[91,25,66,55,"colors"],[91,31,66,61],[91,32,66,62,"background"],[92,6,66,73],[92,7,66,74],[92,8,66,76],[93,6,66,76,"children"],[93,14,66,76],[93,30,67,6],[93,34,67,6,"_reactJsxDevRuntime"],[93,53,67,6],[93,54,67,6,"jsxDEV"],[93,60,67,6],[93,62,67,7,"ActivityIndicator"],[93,79,67,24],[93,80,67,24,"default"],[93,87,67,24],[94,8,67,25,"size"],[94,12,67,29],[94,14,67,30],[94,21,67,37],[95,8,67,38,"color"],[95,13,67,43],[95,15,67,45,"colors"],[95,21,67,51],[95,22,67,52,"primary"],[96,6,67,60],[97,8,67,60,"fileName"],[97,16,67,60],[97,18,67,60,"_jsxFileName"],[97,30,67,60],[98,8,67,60,"lineNumber"],[98,18,67,60],[99,8,67,60,"columnNumber"],[99,20,67,60],[100,6,67,60],[100,13,67,62],[100,14,67,63],[100,29,68,6],[100,33,68,6,"_reactJsxDevRuntime"],[100,52,68,6],[100,53,68,6,"jsxDEV"],[100,59,68,6],[100,61,68,7,"Text"],[100,65,68,11],[100,66,68,11,"default"],[100,73,68,11],[101,8,68,12,"style"],[101,13,68,17],[101,15,68,19],[101,16,68,20,"styles"],[101,22,68,26],[101,23,68,27,"text"],[101,27,68,31],[101,29,68,33],[102,10,68,35,"color"],[102,15,68,40],[102,17,68,42,"colors"],[102,23,68,48],[102,24,68,49,"textSecondary"],[103,8,68,63],[103,9,68,64],[103,10,68,66],[104,8,68,66,"children"],[104,16,68,66],[104,18,68,67],[105,6,68,84],[106,8,68,84,"fileName"],[106,16,68,84],[106,18,68,84,"_jsxFileName"],[106,30,68,84],[107,8,68,84,"lineNumber"],[107,18,68,84],[108,8,68,84,"columnNumber"],[108,20,68,84],[109,6,68,84],[109,13,68,90],[109,14,68,91],[110,4,68,91],[111,6,68,91,"fileName"],[111,14,68,91],[111,16,68,91,"_jsxFileName"],[111,28,68,91],[112,6,68,91,"lineNumber"],[112,16,68,91],[113,6,68,91,"columnNumber"],[113,18,68,91],[114,4,68,91],[114,11,69,10],[114,12,69,11],[115,2,71,0],[116,2,73,0],[116,8,73,6,"styles"],[116,14,73,12],[116,17,73,15,"StyleSheet"],[116,27,73,25],[116,28,73,25,"default"],[116,35,73,25],[116,36,73,26,"create"],[116,42,73,32],[116,43,73,33],[117,4,74,2,"container"],[117,13,74,11],[117,15,74,13],[118,6,75,4,"flex"],[118,10,75,8],[118,12,75,10],[118,13,75,11],[119,6,76,4,"justifyContent"],[119,20,76,18],[119,22,76,20],[119,30,76,28],[120,6,77,4,"alignItems"],[120,16,77,14],[120,18,77,16],[121,4,78,2],[121,5,78,3],[122,4,79,2,"text"],[122,8,79,6],[122,10,79,8],[123,6,80,4,"marginTop"],[123,15,80,13],[123,17,80,15],[123,19,80,17],[124,6,81,4,"fontSize"],[124,14,81,12],[124,16,81,14],[125,4,82,2],[126,2,83,0],[126,3,83,1],[126,4,83,2],[127,0,83,3],[127,3]],"functionMap":{"names":["<global>","AuthCallback","useEffect$argument_0","processAuth"],"mappings":"AAA;eCM;YCM;wBCI;KD0C;GDI;CDQ"},"hasCjsExports":false},"type":"js/module"}]}